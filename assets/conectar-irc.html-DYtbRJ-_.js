import{_ as n,o as s,c as a,d as e}from"./app-B7vt8Q5h.js";const t={},p=e(`<h1 id="conectar-un-script-a-un-servidor-irc" tabindex="-1"><a class="header-anchor" href="#conectar-un-script-a-un-servidor-irc"><span>Conectar un script a un servidor IRC</span></a></h1><p>Podemos interactuar con servidores y canales de IRC desde PHP. Para ello, debemos conectar con el servidor de IRC a través de un socket:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token variable">$server</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;irc.example.com&#39;</span><span class="token punctuation">;</span>
<span class="token variable">$port</span> <span class="token operator">=</span> <span class="token number">6667</span><span class="token punctuation">;</span>
<span class="token variable">$nickname</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;YourNick&#39;</span><span class="token punctuation">;</span>
<span class="token variable">$channel</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;#yourchannel&#39;</span><span class="token punctuation">;</span>
<span class="token variable">$realname</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;Your Real Name&#39;</span><span class="token punctuation">;</span>

<span class="token variable">$socket</span> <span class="token operator">=</span> <span class="token function">fsockopen</span><span class="token punctuation">(</span><span class="token variable">$server</span><span class="token punctuation">,</span> <span class="token variable">$port</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fwrite</span><span class="token punctuation">(</span><span class="token variable">$socket</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;NICK <span class="token interpolation"><span class="token variable">$nickname</span></span>\\r\\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fwrite</span><span class="token punctuation">(</span><span class="token variable">$socket</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;USER <span class="token interpolation"><span class="token variable">$nickname</span></span> 0 * :<span class="token interpolation"><span class="token variable">$realname</span></span>\\r\\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fwrite</span><span class="token punctuation">(</span><span class="token variable">$socket</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;JOIN <span class="token interpolation"><span class="token variable">$channel</span></span>\\r\\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">feof</span><span class="token punctuation">(</span><span class="token variable">$socket</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token function">fgets</span><span class="token punctuation">(</span><span class="token variable">$socket</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">echo</span> <span class="token function">nl2br</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Aquí puedes añadir más lógica para manejar mensajes</span>
<span class="token punctuation">}</span>

<span class="token function">fclose</span><span class="token punctuation">(</span><span class="token variable">$socket</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="escribir-y-leer-mensajes" tabindex="-1"><a class="header-anchor" href="#escribir-y-leer-mensajes"><span>Escribir y leer mensajes</span></a></h2><p>También podemos leer y escribir mensajes en un IRC de forma automática utilizando PHP.</p><p>Veamos un ejemplo básico de cómo hacerlo:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token variable">$server</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;irc.example.com&#39;</span><span class="token punctuation">;</span>
<span class="token variable">$port</span> <span class="token operator">=</span> <span class="token number">6667</span><span class="token punctuation">;</span>
<span class="token variable">$nickname</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;YourNick&#39;</span><span class="token punctuation">;</span>
<span class="token variable">$channel</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;#yourchannel&#39;</span><span class="token punctuation">;</span>
<span class="token variable">$realname</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;Your Real Name&#39;</span><span class="token punctuation">;</span>

<span class="token variable">$socket</span> <span class="token operator">=</span> <span class="token function">fsockopen</span><span class="token punctuation">(</span><span class="token variable">$server</span><span class="token punctuation">,</span> <span class="token variable">$port</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fwrite</span><span class="token punctuation">(</span><span class="token variable">$socket</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;NICK <span class="token interpolation"><span class="token variable">$nickname</span></span>\\r\\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fwrite</span><span class="token punctuation">(</span><span class="token variable">$socket</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;USER <span class="token interpolation"><span class="token variable">$nickname</span></span> 0 * :<span class="token interpolation"><span class="token variable">$realname</span></span>\\r\\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fwrite</span><span class="token punctuation">(</span><span class="token variable">$socket</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;JOIN <span class="token interpolation"><span class="token variable">$channel</span></span>\\r\\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">feof</span><span class="token punctuation">(</span><span class="token variable">$socket</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token variable">$data</span> <span class="token operator">=</span> <span class="token function">fgets</span><span class="token punctuation">(</span><span class="token variable">$socket</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token function">nl2br</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Enviar un mensaje al canal</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">strpos</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;PING&#39;</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">fwrite</span><span class="token punctuation">(</span><span class="token variable">$socket</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;PONG &#39;</span> <span class="token operator">.</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;\\r\\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">strpos</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;PRIVMSG&#39;</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">fwrite</span><span class="token punctuation">(</span><span class="token variable">$socket</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;PRIVMSG <span class="token interpolation"><span class="token variable">$channel</span></span> :Hola, este es un mensaje automático\\r\\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">fclose</span><span class="token punctuation">(</span><span class="token variable">$socket</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Explicación del script:</p><p>Conexión al servidor IRC: Se abre una conexión al servidor IRC especificado.</p><p>Autenticación: Se envían los comandos NICK y USER para autenticar el usuario.</p><p>Unirse a un canal: Se envía el comando JOIN para unirse a un canal específico.</p><p>Leer y responder mensajes: El script lee mensajes del servidor y responde automáticamente a los pings (PING) para mantener la conexión. También puede enviar mensajes automáticos al canal.</p>`,12),o=[p];function c(i,l){return s(),a("div",null,o)}const r=n(t,[["render",c],["__file","conectar-irc.html.vue"]]),k=JSON.parse('{"path":"/php/conectar-irc.html","title":"Conectar un script a un servidor IRC","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Escribir y leer mensajes","slug":"escribir-y-leer-mensajes","link":"#escribir-y-leer-mensajes","children":[]}],"git":{"updatedTime":null,"contributors":[]},"filePathRelative":"php/conectar-irc.md"}');export{r as comp,k as data};
