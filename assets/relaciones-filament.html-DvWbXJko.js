import{_ as p,r as e,o,c,a as s,e as n,b as l,d as a}from"./app-ChIk9p0V.js";const i={},u=a(`<h1 id="anadir-relaciones-sobre-tablas-ya-creadas" tabindex="-1"><a class="header-anchor" href="#anadir-relaciones-sobre-tablas-ya-creadas"><span>Añadir relaciones sobre tablas ya creadas</span></a></h1><p>Para añadir relaciones sobre tablas ya creadas, debemos crear una migración con la estructura:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code>php artisan make<span class="token punctuation">:</span>migration add_<span class="token punctuation">{</span>campos_a_añadir<span class="token punctuation">}</span>_fields_to_<span class="token punctuation">{</span>tabla_en_la_que_añadir<span class="token punctuation">}</span>_table
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Por ejemplo:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code>php artisan make<span class="token punctuation">:</span>migration add_address_fields_to_users_table
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Vamos en <code>database/migrations/</code> a la nueva migración creada y añadimos:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token class-name static-context">Schema</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Blueprint</span> <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$table</span> <span class="token operator">-&gt;</span> <span class="token function">foreignID</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;country_id&#39;</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">constrained</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">onUpdate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;cascade&#39;</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">onDelete</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;cascade&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$table</span> <span class="token operator">-&gt;</span> <span class="token function">foreignID</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;state_id&#39;</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">contstrained</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">onUpdate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;cascade&#39;</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">onDelete</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;cascade&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$table</span> <span class="token operator">-&gt;</span> <span class="token function">foreignID</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;city_id&#39;</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">contstrained</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">onUpdate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;cascade&#39;</span><span class="token punctuation">)</span>
      <span class="token operator">-&gt;</span><span class="token function">onDelete</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;cascade&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;address&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;postal_code&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Con esto, crearíamos relaciones con las tablas country, state y city.</p><p>Le indicamos que pueden ser campos vacíos con <code>-&gt;nullable()</code> y que al borrar un usuario (<code>-&gt;onDelete(&#39;cascade&#39;)</code>), o se actualice el usuario (<code>-&gt;onUpdate(&#39;cascade&#39;)</code>), se elimine o actualice la relación.</p><p>También podemos crear, aparte de las relaciones, nuevos campos, como <code>address</code> o <code>postal_code</code>.</p><p>El fichero de migración quedaría algo así:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Database<span class="token punctuation">\\</span>Migrations<span class="token punctuation">\\</span>Migration</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Database<span class="token punctuation">\\</span>Schema<span class="token punctuation">\\</span>Blueprint</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Support<span class="token punctuation">\\</span>Facades<span class="token punctuation">\\</span>Schema</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token keyword">class</span> <span class="token class-name-definition class-name">extends</span> <span class="token class-name">Migration</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * Run the migrations.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">up</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span>
    <span class="token punctuation">{</span>
        <span class="token class-name static-context">Schema</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Blueprint</span> <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">foreignId</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;country_id&#39;</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">constrained</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">onUpdate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;cascade&#39;</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">onDelete</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;cascade&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">foreignId</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;state_id&#39;</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">constrained</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">onUpdate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;cascade&#39;</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">onDelete</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;cascade&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token function">foreignId</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;city_id&#39;</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">constrained</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">onUpdate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;cascade&#39;</span><span class="token punctuation">)</span>
                <span class="token operator">-&gt;</span><span class="token function">onDelete</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;cascade&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;address&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$table</span><span class="token operator">-&gt;</span><span class="token keyword type-declaration">string</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;postal_code&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * Reverse the migrations.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">down</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span>
    <span class="token punctuation">{</span>
        <span class="token class-name static-context">Schema</span><span class="token operator">::</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;users&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Blueprint</span> <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Para dar de alta estos campos en el formulario, iremos al fichero <code>app/Filament/Resources/{Modelo}Resource.php</code>, por ejemplo, a <code>app/Filament/Resources/UserResource.php</code> y añadirlos en el apartado:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">table</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Table</span> <span class="token variable">$table</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Table</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$table</span>
        <span class="token operator">-&gt;</span><span class="token function">columns</span><span class="token punctuation">(</span><span class="token punctuation">[</span>

        <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Podemos agrupar los campos en secciones. Para ello, deberemo importar:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Filament<span class="token punctuation">\\</span>Forms<span class="token punctuation">\\</span>Components<span class="token punctuation">\\</span>Section</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Y agrupar, dentro de schema, las secciones con:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token class-name static-context">Section</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Título de la sección&#39;</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Descripción de la sección&#39;</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Por defecto, nos coloca cada campo en una fila, estando todos en la misma columna. Podemos definir el número de columnas con <code>-&gt;columns(X)</code>:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token class-name static-context">Section</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Título de la sección&#39;</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Descripción de la sección&#39;</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">columns</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token operator">-&gt;</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>También podemos agrupar en el menú lateral los items del menú. Crearemos una variable para agrupar los items en cada uno de los <code>{Modelo}Resource.php</code>:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token operator">?</span><span class="token keyword type-hint">string</span> <span class="token variable">$navigationGroup</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;Datos geográficos&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>En este bloque, tenemos también las variables para cambiar el nombre del recurso:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token operator">?</span><span class="token keyword type-hint">string</span> <span class="token variable">$navigationLabel</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;Usuarios&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>El icono:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token operator">?</span><span class="token keyword type-hint">string</span> <span class="token variable">$navigationIcon</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;heroicon-o-user&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Y el orden en el que se va a mostrar ese elemento en el menú:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token operator">?</span><span class="token keyword type-hint">int</span> <span class="token variable">$navigationSort</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,28),r={href:"https://blade-ui-kit.com/",target:"_blank",rel:"noopener noreferrer"},k=a(`<p>En caso de que no tengamos algún paquete de iconos de Blade, podemos instalarlo con el comando composer que aparece en la página de los iconos:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code>composer <span class="token keyword">require</span> postare<span class="token operator">/</span>blade<span class="token operator">-</span>mdi
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>En caso de que no lo instalemos, podría darnos un error como este:</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>BladeUI \\ Icons \\ Exceptions \\ SvgNotFound
PHP 8.1.2-1ubuntu2.15
10.48.9
Svg by name &quot;mdi-city-variant-outline&quot; from set &quot;default&quot; not found.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Para importar las claves foráneas de la tabla principal usaremos <code>Forms\\Components\\Select::make(&#39;{tabla}_id&#39;)</code>:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token class-name class-name-fully-qualified static-context">Forms<span class="token punctuation">\\</span>Components<span class="token punctuation">\\</span>Select</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;country_id&#39;</span><span class="token punctuation">)</span>
<span class="token operator">-&gt;</span><span class="token function">relationship</span><span class="token punctuation">(</span><span class="token argument-name">name</span> <span class="token punctuation">:</span> <span class="token string single-quoted-string">&#39;country&#39;</span><span class="token punctuation">,</span> <span class="token argument-name">titleAttribute</span><span class="token punctuation">:</span> <span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">)</span>
<span class="token operator">-&gt;</span><span class="token function">searchable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">-&gt;</span><span class="token function">preload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">-&gt;</span><span class="token function">live</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">-&gt;</span><span class="token function">required</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><code>-&gt;relationship(name : &#39;country&#39;, titleAttribute: &#39;name&#39;)</code> genera la relación.</p></li><li><p><code>-&gt;searchable()</code> permite la búsqueda.</p></li><li><p><code>-&gt;preload()</code> carga la búsqueda previamente para que sea más rápida la experiencia del usuario.</p></li><li><p><code>-&gt;live()</code> actualiza en tiempo real.</p></li><li><p><code>-&gt;required()</code> campo obligatorio.</p></li></ul><p>Y para otras tablas, importaremos:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Support<span class="token punctuation">\\</span>Collection</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Filament<span class="token punctuation">\\</span>Forms<span class="token punctuation">\\</span>Get</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>User</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>Country</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>State</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>City</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Y vincularemos las búsquedas:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token class-name class-name-fully-qualified static-context">Forms<span class="token punctuation">\\</span>Components<span class="token punctuation">\\</span>Select</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;state_id&#39;</span><span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span><span class="token function">options</span><span class="token punctuation">(</span><span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Get</span> <span class="token variable">$get</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Collection</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">State</span><span class="token operator">::</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;country_id&#39;</span><span class="token punctuation">,</span> <span class="token variable">$get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;country_id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span><span class="token function">searchable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span><span class="token function">preload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span><span class="token function">required</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token class-name class-name-fully-qualified static-context">Forms<span class="token punctuation">\\</span>Components<span class="token punctuation">\\</span>Select</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;city_id&#39;</span><span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span><span class="token function">options</span><span class="token punctuation">(</span><span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Get</span> <span class="token variable">$get</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Collection</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">City</span><span class="token operator">::</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;state_id&#39;</span><span class="token punctuation">,</span> <span class="token variable">$get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;state_id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span><span class="token function">searchable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span><span class="token function">preload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token operator">-&gt;</span><span class="token function">required</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Para que al borrar el país, se borren también los otros dos campos, escribiremos en el bloque del país:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token operator">-&gt;</span><span class="token function">afterStateUpdated</span><span class="token punctuation">(</span><span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Set</span> <span class="token variable">$set</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token variable">$set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;state_id&#39;</span><span class="token punctuation">,</span> <span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">-&gt;</span><span class="token function">afterStateUpdated</span><span class="token punctuation">(</span><span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Set</span> <span class="token variable">$set</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token variable">$set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;city_id&#39;</span><span class="token punctuation">,</span> <span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>O, más legible:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token operator">-&gt;</span><span class="token function">afterStateUpdated</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Set</span> <span class="token variable">$set</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token variable">$set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;state_id&#39;</span><span class="token punctuation">,</span> <span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token variable">$set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;city_id&#39;</span><span class="token punctuation">,</span> <span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Para que no pida la contraseña en la versión de editar, indicaremos que <code>password</code> esté oculta con <code>-&gt;hiddenOn(&#39;edit&#39;)</code>.</p><p>Para que haya columnas que no se muestren por defecto, pero que se puedan mostar si se activan en el menú de las vistas, usaremos <code>-&gt;toggleable(isToggledHiddenByDefault: true)</code>. Si lo que queremos es que se muestren por defecto, pero se puedan ocultar, usaremos <code>-&gt;toggleable(isToggledHiddenByDefault: false)</code>.</p><p>Para que se puedan hacer búsquedas en los campos, hay que indicar en esos campos donde realizar las búsquedas <code>-&gt;searchable()</code>.</p><p>Si queremos que se pueda ordenar por un determinado campo, le indicaremos <code>-&gt;sortable()</code>.</p><p>Quedando algo así el fichero <code>app/Filament/Resources/UserResource.php</code>:</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\\</span>Filament<span class="token punctuation">\\</span>Resources</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\\</span>Filament<span class="token punctuation">\\</span>Resources<span class="token punctuation">\\</span>UserResource<span class="token punctuation">\\</span>Pages</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\\</span>Filament<span class="token punctuation">\\</span>Resources<span class="token punctuation">\\</span>UserResource<span class="token punctuation">\\</span>RelationManagers</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>User</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>Country</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>State</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>City</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Filament<span class="token punctuation">\\</span>Forms</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Filament<span class="token punctuation">\\</span>Forms<span class="token punctuation">\\</span>Form</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Filament<span class="token punctuation">\\</span>Forms<span class="token punctuation">\\</span>Components<span class="token punctuation">\\</span>Section</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Filament<span class="token punctuation">\\</span>Resources<span class="token punctuation">\\</span>Resource</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Filament<span class="token punctuation">\\</span>Tables</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Filament<span class="token punctuation">\\</span>Tables<span class="token punctuation">\\</span>Table</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Database<span class="token punctuation">\\</span>Eloquent<span class="token punctuation">\\</span>Builder</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Database<span class="token punctuation">\\</span>Eloquent<span class="token punctuation">\\</span>SoftDeletingScope</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Support<span class="token punctuation">\\</span>Collection</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Filament<span class="token punctuation">\\</span>Forms<span class="token punctuation">\\</span>Get</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Filament<span class="token punctuation">\\</span>Forms<span class="token punctuation">\\</span>Set</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">UserResource</span> <span class="token keyword">extends</span> <span class="token class-name">Resource</span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token operator">?</span><span class="token keyword type-hint">string</span> <span class="token variable">$model</span> <span class="token operator">=</span> <span class="token class-name static-context">User</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token operator">?</span><span class="token keyword type-hint">string</span> <span class="token variable">$navigationIcon</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;heroicon-o-user&#39;</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token operator">?</span><span class="token keyword type-hint">string</span> <span class="token variable">$navigationLabel</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;Usuarios&#39;</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token operator">?</span><span class="token keyword type-hint">int</span> <span class="token variable">$navigationSort</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>


    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">form</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Form</span> <span class="token variable">$form</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Form</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$form</span>
            <span class="token operator">-&gt;</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">[</span>

                <span class="token class-name static-context">Section</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Información personal&#39;</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Datos del usuario&#39;</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">columns</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                        <span class="token comment">// ...</span>
                        <span class="token class-name class-name-fully-qualified static-context">Forms<span class="token punctuation">\\</span>Components<span class="token punctuation">\\</span>TextInput</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">required</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">maxLength</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token class-name class-name-fully-qualified static-context">Forms<span class="token punctuation">\\</span>Components<span class="token punctuation">\\</span>TextInput</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;email&#39;</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">email</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">required</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">maxLength</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token class-name class-name-fully-qualified static-context">Forms<span class="token punctuation">\\</span>Components<span class="token punctuation">\\</span>DateTimePicker</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;email_verified_at&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token class-name class-name-fully-qualified static-context">Forms<span class="token punctuation">\\</span>Components<span class="token punctuation">\\</span>TextInput</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;password&#39;</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">required</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">hiddenOn</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;edit&#39;</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">maxLength</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name static-context">Section</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Dirección&#39;</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Datos del usuario&#39;</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">columns</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">schema</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                        <span class="token comment">// ...</span>
                        <span class="token class-name class-name-fully-qualified static-context">Forms<span class="token punctuation">\\</span>Components<span class="token punctuation">\\</span>Select</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;country_id&#39;</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">relationship</span><span class="token punctuation">(</span><span class="token argument-name">name</span><span class="token punctuation">:</span> <span class="token string single-quoted-string">&#39;country&#39;</span><span class="token punctuation">,</span> <span class="token argument-name">titleAttribute</span><span class="token punctuation">:</span> <span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">searchable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">preload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">live</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">afterStateUpdated</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Set</span> <span class="token variable">$set</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token variable">$set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;state_id&#39;</span><span class="token punctuation">,</span> <span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token variable">$set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;city_id&#39;</span><span class="token punctuation">,</span> <span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                              <span class="token punctuation">}</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">required</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token class-name class-name-fully-qualified static-context">Forms<span class="token punctuation">\\</span>Components<span class="token punctuation">\\</span>Select</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;state_id&#39;</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">options</span><span class="token punctuation">(</span>
                                <span class="token keyword">fn</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Get</span> <span class="token variable">$get</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Collection</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">State</span><span class="token operator">::</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                    <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;country_id&#39;</span><span class="token punctuation">,</span> <span class="token variable">$get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;country_id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                                    <span class="token operator">-&gt;</span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">)</span>
                            <span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">afterStateUpdated</span><span class="token punctuation">(</span><span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Set</span> <span class="token variable">$set</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token variable">$set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;city_id&#39;</span><span class="token punctuation">,</span> <span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">searchable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">afterStateUpdated</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Set</span> <span class="token variable">$set</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token variable">$set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;city_id&#39;</span><span class="token punctuation">,</span> <span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                              <span class="token punctuation">}</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">preload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">live</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">required</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token class-name class-name-fully-qualified static-context">Forms<span class="token punctuation">\\</span>Components<span class="token punctuation">\\</span>Select</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;city_id&#39;</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">options</span><span class="token punctuation">(</span>
                                <span class="token keyword">fn</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Get</span> <span class="token variable">$get</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Collection</span> <span class="token operator">=&gt;</span> <span class="token class-name static-context">City</span><span class="token operator">::</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                    <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;state_id&#39;</span><span class="token punctuation">,</span> <span class="token variable">$get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;state_id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                                    <span class="token operator">-&gt;</span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;id&#39;</span><span class="token punctuation">)</span>
                            <span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">searchable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">preload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">live</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">required</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token class-name class-name-fully-qualified static-context">Forms<span class="token punctuation">\\</span>Components<span class="token punctuation">\\</span>TextInput</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;address&#39;</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">required</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token class-name class-name-fully-qualified static-context">Forms<span class="token punctuation">\\</span>Components<span class="token punctuation">\\</span>TextInput</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;postal_code&#39;</span><span class="token punctuation">)</span>
                            <span class="token operator">-&gt;</span><span class="token function">required</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">table</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Table</span> <span class="token variable">$table</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Table</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$table</span>
            <span class="token operator">-&gt;</span><span class="token function">columns</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token class-name class-name-fully-qualified static-context">Tables<span class="token punctuation">\\</span>Columns<span class="token punctuation">\\</span>TextColumn</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;name&#39;</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">searchable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name class-name-fully-qualified static-context">Tables<span class="token punctuation">\\</span>Columns<span class="token punctuation">\\</span>TextColumn</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;email&#39;</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">searchable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name class-name-fully-qualified static-context">Tables<span class="token punctuation">\\</span>Columns<span class="token punctuation">\\</span>TextColumn</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;email_verified_at&#39;</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">dateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">toggleable</span><span class="token punctuation">(</span><span class="token argument-name">isToggledHiddenByDefault</span><span class="token punctuation">:</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">sortable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name class-name-fully-qualified static-context">Tables<span class="token punctuation">\\</span>Columns<span class="token punctuation">\\</span>TextColumn</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;created_at&#39;</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">dateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">sortable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">toggleable</span><span class="token punctuation">(</span><span class="token argument-name">isToggledHiddenByDefault</span><span class="token punctuation">:</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name class-name-fully-qualified static-context">Tables<span class="token punctuation">\\</span>Columns<span class="token punctuation">\\</span>TextColumn</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;updated_at&#39;</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">dateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">sortable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token operator">-&gt;</span><span class="token function">toggleable</span><span class="token punctuation">(</span><span class="token argument-name">isToggledHiddenByDefault</span><span class="token punctuation">:</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">filters</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token comment">//</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">actions</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token class-name class-name-fully-qualified static-context">Tables<span class="token punctuation">\\</span>Actions<span class="token punctuation">\\</span>EditAction</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">bulkActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                <span class="token class-name class-name-fully-qualified static-context">Tables<span class="token punctuation">\\</span>Actions<span class="token punctuation">\\</span>BulkActionGroup</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                    <span class="token class-name class-name-fully-qualified static-context">Tables<span class="token punctuation">\\</span>Actions<span class="token punctuation">\\</span>DeleteBulkAction</span><span class="token operator">::</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">getRelations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">array</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>
            <span class="token comment">//</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">getPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">array</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>
            <span class="token string single-quoted-string">&#39;index&#39;</span> <span class="token operator">=&gt;</span> <span class="token class-name class-name-fully-qualified static-context">Pages<span class="token punctuation">\\</span>ListUsers</span><span class="token operator">::</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;create&#39;</span> <span class="token operator">=&gt;</span> <span class="token class-name class-name-fully-qualified static-context">Pages<span class="token punctuation">\\</span>CreateUser</span><span class="token operator">::</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/create&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;edit&#39;</span> <span class="token operator">=&gt;</span> <span class="token class-name class-name-fully-qualified static-context">Pages<span class="token punctuation">\\</span>EditUser</span><span class="token operator">::</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;/{record}/edit&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Y debemos cargar la relación en el modelo (<code>app/Models/User.php</code>):</p><div class="language-php line-numbers-mode" data-ext="php" data-title="php"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">country</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">belongsTo</span><span class="token punctuation">(</span><span class="token class-name static-context">Country</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Quedando así:</p>`,24);function d(m,v){const t=e("ExternalLinkIcon");return o(),c("div",null,[u,s("p",null,[n("Podemos buscar los iconos en la página de iconos de Blade: "),s("a",r,[n("https://blade-ui-kit.com/"),l(t)]),n(".")]),k])}const b=p(i,[["render",d],["__file","relaciones-filament.html.vue"]]),f=JSON.parse('{"path":"/laravel/relaciones-filament.html","title":"Añadir relaciones sobre tablas ya creadas","lang":"en-US","frontmatter":{},"headers":[],"git":{"updatedTime":1714521194000,"contributors":[{"name":"fernando","email":"fernando@juandemariana.org","commits":1}]},"filePathRelative":"laravel/relaciones-filament.md"}');export{b as comp,f as data};
